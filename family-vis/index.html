<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
<title>Sandhoefner Family Vis</title>

<style>
.text {
    font-family: "Lucida Console";
    font-size: 11.5px;
}
.text2 {
    font-family: "Lucida Console";
    font-size: 13px;
}
.table col:nth-child(1){width:300px;}
.table col:nth-child(2){width:100px;}
</style>
<script src="
jquery/jquery-2.1.1.min.js" charset="utf-8"></script>
<script src="
bootstrap/js/bootstrap.min.js" charset="utf-8"></script></head>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<div id="vis"></div>
<table class="table"><tr>
  <td>
  <div class="text2" id="text" class="col-md-8" ></div>
  <div id="age" class="text2"><br>*Ages and information are approximate.</div>
</td><td>
  <div id="photo" class="col-md-4"></div>
</td>
</tr></table>



<script>
// create svg canvas
var margin = {top: 50, bottom: 10, left: 300, right: 40};
var width = 1650 - margin.left - margin.right;
var height = 400 - margin.top - margin.bottom;

var svg = d3.select("#vis").append("svg")
  .attr("width", width)
  .attr("height", height);

var l = 30;
var m = 40;
  var l2 = 40;
  for (i = 0; i < 7; i++) {
    svg.append("line")
      .attr("x1", (2+4*i)*m-l)
      .attr("x2", (2+4*i)*m+l)
      .attr("y1", m*5)
      .attr("y2", m*5)
      .attr("stroke", "black")

    svg.append("line")
      .attr("x1", (1+4*i)*m)
      .attr("x2", (1+4*i)*m)
      .attr("y1", m*4)
      .attr("y2", m*5-10)
      .attr("stroke", "black")

  }

  svg.append("line")
    .attr("x1", 13*m-l)
    .attr("x2", 13*m+l)
    .attr("y1", 3*m)
    .attr("y2", 3*m)
    .attr("stroke", "black");

  svg.append("line")
    .attr("x1", 6*m-l2)
    .attr("x2", 6*m+l2)
    .attr("y1", 6*m)
    .attr("y2", 6*m)
    .attr("stroke", "black");

  svg.append("line")
    .attr("x1", 5*m)
    .attr("x2", 5*m)
    .attr("y1", 6*m)
    .attr("y2", 7*m-10)
    .attr("stroke", "black");

    svg.append("line")
    .attr("x1", 7*m)
    .attr("x2", 7*m)
    .attr("y1", 6*m)
    .attr("y2", 7*m-10)
    .attr("stroke", "black");

    svg.append("line")
    .attr("x1", 6*m)
    .attr("x2", 6*m)
    .attr("y1", 5*m)
    .attr("y2", 6*m)
    .attr("stroke", "black");

  svg.append("line")
    .attr("x1", 14*m)
    .attr("x2", 14*m)
    .attr("y1", 10+m)
    .attr("y2", 3*m-10)
    .attr("stroke", "black");

    svg.append("line")
    .attr("x1", 14*m)
    .attr("x2", 14*m)
    .attr("y1", 5*m)
    .attr("y2", 7*m-10)
    .attr("stroke", "black");

    svg.append("line")
    .attr("x1", 13*m)
    .attr("x2", 13*m)
    .attr("y1", 3*m)
    .attr("y2", 4*m)
    .attr("stroke", "black");

    svg.append("line")
    .attr("x1", m)
    .attr("x2", 25*m)
    .attr("y1", 4*m)
    .attr("y2", 4*m)
    .attr("stroke", "black");

// load data
d3.json("family_new.json", function(data) {

  // make global

  json = [
  {
    "name": "Jason Sandhoefner",
    "age": 40,
    "gender": "m",
    "description": "Competitive arm wrestler. Manager at The Home Depot. Likes guns. Briefly studied architecture in community \u00A0\u00A0\u00A0\ncollege, no degree.",
    "x": 1,
    "y": 5,
    "file": "jason"
  },
  {
    "name": "Kristen Sandhoefner",
    "age": 35,
    "gender": "f",
    "description":
    "Massage therapist. Enjoys things with zebra-print patterns on them. Very excited to be married, judging by her\nInstagram.",
    "x": 3,
    "y": 5,
    "file": "kristen"
  },
  {
    "name": "Shannon Senglaub",
    "age": 35,
    "gender": "f",
    "description":
    "Associate's degree in something like computer programming. Used to work for a company called Oncotech, which \u00A0\ndid cancer research. That was a long time ago.",
    "x": 5,
    "y": 5,
    "file": "shannon"
  },
  {
    "name": "Greg Senglaub",
    "age": 35,
    "gender": "m",
    "description":
    "High school history teacher. Took many years to graduate from CSULB while working at Ralph's or something. \u00A0\u00A0\u00A0\nTeaches bad kids at bad schools. Cool guy.",
    "x": 7,
    "y": 5,
    "file": "greg"
  },
  {
    "name": "Erin Ketchum",
    "age": 29,
    "gender": "f",
    "description":
    "Elementary school teacher. BA in liberal studies from Chapman University. Teaches bad kids. Will be excited to\nmeet you.",
    "x": 9,
    "y": 5,
    "file": "erin"
  },
  {
    "name": "Andrew Ketchum",
    "age": 29,
    "gender": "m",

    "description": "Shy. Quality assurance engineer at Broadcom, where your uncle also works, and which was recently acquired by \u00A0\nAvago.",
    "x": 11,
    "y": 5,
    "file": "andrew"
  },
  {
    "name": "Corinne Lyons",
    "age": 25,
    "gender": "f",
    "description":
    "Master's degree (!!!) from CSUF, where she also got her bachelor's. Speech therapist working in schools - high\nschools, I think.",
    "x": 13,
    "y": 5,
    "file": "corinne"
  },
  {
    "name": "Scott Lyons",
    "age": 28,
    "gender": "m",
    "description":
    "Does some kind of insurance stuff at Travelers. Flies to Minnesota once in a while for business. Bachelor's \u00A0\u00A0\nfrom CSUF in business administration.",
    "x": 15,
    "y": 5,
    "file": "scott"
  },
  {
    "name": "Collin Sandhoefner",
    "age": 23,
    "gender": "m",
    "description":
    "Smart. Enjoys creative writing. Pursuing a bachelor's in mathematics from CSULB, but struggling to get back to\nit after taking time off.",
    "x": 17,
    "y": 5,
    "file": "collin"
  },
  {
    "name": "Chelsea Brown",
    "age": 23,
    "gender": "f",
    "description":
    "Goes to/went to CSULB. Enjoys smoking weed. Has worked at Sprouts & Lazy Dog Cafe. Relationship status with \u00A0\u00A0\nCollin presently unclear. Not expected to attend.",
    "x": 19,
    "y": 5,
    "file": "chelsea"
  },
  {
    "name": "Evan Sandhoefner",
    "age": 19,
    "gender": "m",
    "description":
    "Pursuing a BA in either economics or computer science at Harvard College. Loves you very much. Enjoys rock \u00A0\u00A0\u00A0\nclimbing and playing string instruments.",
    "x": 21,
    "y": 5,
    "file": "evan"
  },
  {
    "name": "Amy Huang",
    "age": 20,
    "gender": "f",
    "description":
    "The most beautiful girl in the world. Kind and brilliant and pure of heart. Passionate about child mental \u00A0\u00A0\u00A0\u00A0\nhealth and emotional intelligence and homelessness.",
    "x": 23,
    "y": 5,
    "file": "amy"
  },
  {
    "name": "Aidan Sandhoefner",
    "age": 17,
    "gender": "m",
    "description":
    "Graduating high school senior, to attend UC Davis in the fall. Plays baseball. Doesn't know what he wants to \u00A0\ndo with his life. Good at math?",
    "x": 25,
    "y": 5,
    "file": "aidan"
  },
  {
    "name": "Megan Bulone",
    "age": 17,
    "gender": "f",
    "description":
    "A mystery. The youngest of four Bulones, all of whom went to Oxford. Her older siblings, from oldest to \u00A0\u00A0\u00A0\u00A0\u00A0\nyoungest: Daniel, Joe, and Anne-Marie.",
    "x": 27,
    "y": 5,
    "file": "megan"
  },
  {
    "name": "Carter Senglaub",
    "age": 8,
    "gender": "m",
    "description": 
    "Currently attending elementary school. Enjoys cars, legos, and horseplay. Has yellow hair. Is eight years old.",
    "x": 5,
    "y": 7,
    "file": "carter"
  },
  {
    "name": "Makenna Senglaub",
    "age": 4,
    "gender": "f",
    "description":
    "Not yet enrolled in school. Enjoys babies, both living and plastic. Spends time playing, eating, and sleeping.",
    "x": 7,
    "y": 7,
    "file": "makenna"
  },
  {
    "name": "Emmy Lyons",
    "age": 0,
    "gender": "f",
    "description":
    "Is an actual infant child. I don't know if you can tell, but I'm kinda rushing here so sorry about the lack of\ngood information.",
    "x": 14,
    "y": 7,
    "file": "emmy"
  },
  {
    "name": "Jim Sandhoefner",
    "age": 60,
    "gender": "m",
    "description":
    "Some community college. Hates Democrats. Likes guns. Mechanic and security guard. Works a lot. Doesn't believe\nin climate change.",
    "x": 12,
    "y": 3,
    "file": "jim"
  },
  {
    "name": "Cathy Sandhoefner",
    "age": 59,
    "gender": "f",
    "description":
    "Hasn't been officially employed in many, many years. Enjoys sewing and quilting. Political ideology: 'why \u00A0\u00A0\u00A0\u00A0\ncan't everyone just get along?'",
    "x": 14,
    "y": 3,
    "file": "cathy"
  },
  {
    "name": "Joe Matthews",
    "age": 80,
    "gender": "m",
    "description":
    "Worked for IBM in his heyday. Has hearing aids. Likes to make jokes & spend money on his grandchildren. Seems\u00A0\nto be fond of you.",
    "x": 14,
    "y": 1,
    "file": "joe"
  }
];
  
  

  var node = svg.selectAll(".node")
    .data(json)
    .enter()
    .append("g").attr("class", "node")
    .on("mouseover", mouseover)
    .on("mouseout", mouseout)
    .attr("transform", function(d, i) {
      return "translate("+(m*json[19].x)+","+(m*json[19].y)+")"
    });

  // var groups = svg.selectAll("g")          
  //   .append("text")
  //   .attr("dx", 6)
  //   .attr("dy", 4.5)
  //   .text(function(d) {return d.name});

var r = 20;
  node.append("circle")
    .attr("class", "circle")
    .attr("r", r)
    .attr("fill", function(d) {if (d.gender == "m") {
        return "blue"
      } else {
        return "#FF66FF"
      }})
    .on("mouseover", function (d) {document.getElementById('text').innerText =d.description;
      document.getElementById("photo").innerHTML = "<img src='" + d.file + ".jpg' alt='Photo of " + d.name + "' style='width:228px;height:228px;'>";})
    .attr("id", function(d) {return d.name});

  
    

  d3.selectAll(".node")
    // .transition(1000)
    .attr("transform", function(d, i) {
      return "translate("+(m*d.x)+","+(m*d.y)+")"
    })



    function mouseover() {
  d3.select(this).select("circle").transition()
      .duration(500)
      .attr("r", 35);


      
}



function mouseout() {
  d3.select(this).select("circle").transition()
      .duration(500)
      .attr("r", r);
}


  var nodes = d3.selectAll(".circle")
  nodes
    .on("mouseenter", function(d) {
      var that = this;
      d3.selectAll("node")
        .transition().duration(250)
        .attr("r", function(d) {
          if (d.name == that.id) {
            console.log("y");
            return 40;
          }
        }); 
      var noodle = 0;
      json.forEach(function(d) {
        if (d.name == that.id) {
          noodle = d.x;
        }
        return noodle;
      });
  
      var x = m*noodle;
      json.forEach(function(d) {
        if (d.name == that.id) {
          noodle = d.y;
        }
        return noodle;
      });
      var y = m*noodle;

      var tip = svg.append("g")
          .attr("id", "toolTip");

          var width = 140;

      tip.append("rect")
        .attr("x", function(d) {
          if (x <= 14*m) {
            return x + 40;
          } else {
            return x - width - 40;
          }
        })
        .attr("y", function(d) {
          return y - 20;
        })
        .attr("width", width)
        .attr("height", 55)
        .attr("fill", "black")
        .attr("fill-opacity", .75);

        var noodle = 'obj';
      json.forEach(function(d) {
        if (d.name == that.id) {
          noodle = d;
        }
        return noodle;
      });

      tip.append("text")
        .text(function() {
          return that.id;
        })
        .attr("text-decoration", "underline")
        .attr("fill", "white")
        .attr("class", "text")
        .attr("x", function(d) {
          if (x <= 14*m) {
            return x + 45;
          } else {
            return x - width - 37.5;
          }
        })
        .attr("y", function(d) {
          return y - 5;
        });

      tip.append("text")
      .attr("class", "text")
        .text(function() {
          return noodle.age + " years old";
        })
        .attr("fill", "white")
        .attr("x", function(d) {
          if (x <= 14*m) {
            return x + 45;
          } else {
            return x - width - 37.5;
          }
        })
        .attr("y", function(d) {
          return y + 12;
        });

        tip.append("text")
        .attr("class", "text")
        .text(function() {
          if (noodle.gender == "f") {return "Female"} else {return "Male"}
        })
        .attr("fill", "white")
        .attr("x", function(d) {
          if (x <= 14*m) {
            return x + 45;
          } else {
            return x - width - 37.5;
          }
        })
        .attr("y", function(d) {
          return y + 29;
        });

    
})
    .on("mouseleave", function(d) {
      d3.select("#toolTip").remove();});
   
  
    // var circles = d3.selectAll("circle");
  lines = d3.selectAll("line")

  
  
  // nodes
  //   .transition().duration(fade).attr("fill", function(d) {
  //     if (d.gender == "m") {
  //       return "blue"
  //     } else {
  //       return "#FF66FF"
  //     }})

});

  


</script>
</body>
</html>